<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Moulding Form</title>
  <!-- Font Awesome for sidebar icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary-color: rgb(255, 0, 0);
      --primary-dark: #1e3a8a;
      --primary-light:  rgb(0, 0, 0);
      --secondary-color: #f59e0b;
      --accent-color: #10b981;
      --success-color: #059669;
      --warning-color: #d97706;
      --error-color: #dc2626;
      --info-color: #0284c7;
      --background-primary: #f8fafc;
      --background-secondary: #f1f5f9;
      --card-background: #ffffff;
      --sidebar-background: rgb(128, 0, 0);
      --sidebar-hover:  #F3CE14;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --text-light: #9ca3af;
      --text-white: #ffffff;
      --border-color: #e5e7eb;
      --border-light: #f3f4f6;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
      --gradient-secondary: linear-gradient(135deg, var(--secondary-color) 0%, #ea580c 100%);
      --gradient-success: linear-gradient(135deg, var(--accent-color) 0%, var(--success-color) 100%);
    }
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--background-primary); color: var(--text-primary); line-height: 1.6; overflow-x: hidden; }
    .container { display: flex; min-height: 100vh; }
    .sidebar { width: 280px; background: var(--sidebar-background); color: var(--text-white); height: 100vh; position: fixed; left: 0; top: 0; box-shadow: var(--shadow-xl); border-right: 1px solid rgba(255, 255, 255, 0.1); z-index: 1000; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
    .sidebar-header { position: sticky; top: 0; padding: 24px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: var(--sidebar-background); background: linear-gradient(135deg, rgb(255, 128, 0) 0%, rgba(30, 58, 138, 0.1) 100%); z-index: 1001; flex-shrink: 0; backdrop-filter: blur(10px); }
    .sidebar h2 { font-size: 20px; font-weight: 700; letter-spacing: -0.025em; display: flex; align-items: center; gap: 12px; margin: 0; }
    .sidebar h2 i { font-size: 24px; color: var(--primary-light); }
    .sidebar-body { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .nav-container { flex: 1; overflow-y: auto; overflow-x: hidden; padding: 16px 0; }
    /* Custom sidebar scrollbar */
    .nav-container::-webkit-scrollbar {
      width: 8px;
      background: var(--sidebar-background);
    }
    .nav-container::-webkit-scrollbar-thumb {
      background: var(--sidebar-hover);
      border-radius: 8px;
      border: 2px solid var(--sidebar-background);
    }
    .nav-container::-webkit-scrollbar-thumb:hover {
      background: var(--primary-light);
    }
    .nav-container {
      scrollbar-width: thin;
      scrollbar-color: var(--sidebar-hover) var(--sidebar-background);
    }
    .nav-links { list-style: none; padding: 0; margin: 0; }
    .nav-links li { margin: 0; position: relative; }
    .nav-links li.active::before { content: ""; position: absolute; left: 0; top: 0; height: 100%; width: 4px; background: var(--primary-light); border-radius: 0 4px 4px 0; }
    .nav-links li.active { background: var(--sidebar-hover); }
    .nav-links a { color: var(--text-white); text-decoration: none; padding: 12px 20px; display: flex; align-items: center; gap: 12px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-weight: 500; font-size: 14px; position: relative; overflow: hidden; }
    .nav-links a::before { content: ''; position: absolute; left: -100%; top: 0; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent); transition: left 0.5s; }
    .nav-links a:hover::before { left: 100%; }
    .nav-links a:hover { background: var(--sidebar-hover); transform: translateX(4px); color: var(--primary-light); }
    .nav-links a i { font-size: 16px; width: 20px; text-align: center; color: #94a3b8; transition: color 0.3s ease; flex-shrink: 0; }
    .nav-links a:hover i, .nav-links li.active a i { color: var(--primary-light); }
    .user-info { position: sticky; bottom: 0; padding: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); background: var(--sidebar-background); background: rgba(0, 0, 0, 0.2); z-index: 1001; flex-shrink: 0; backdrop-filter: blur(10px); }
    .user-info img { width: 100%; max-width: 200px; height: auto; border-radius: 8px; box-shadow: var(--shadow-md); }
    .main-content { margin-left: 280px; padding: 32px 40px; width: calc(100% - 280px); min-height: 100vh; background: var(--background-primary); }
    .page-header { margin-bottom: 32px; padding-bottom: 24px; border-bottom: 2px solid var(--border-light); }
    .page-title { font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; display: flex; align-items: center; gap: 12px; }
    .page-title i { color: var(--primary-color); }
    .page-subtitle { font-size: 16px; color: var(--text-secondary); margin-bottom: 16px; }
    .success-message { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); color: var(--success-color); padding: 16px 20px; border-radius: 12px; border-left: 4px solid var(--success-color); font-size: 18px; font-weight: 600; text-align: center; margin-bottom: 24px; box-shadow: var(--shadow-sm); }
    .form-container { background: var(--card-background); border-radius: 16px; padding: 32px; box-shadow: var(--shadow-lg); border: 1px solid var(--border-color); position: relative; overflow: hidden; }
    .form-container::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--gradient-primary); }
    .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 32px; margin-bottom: 24px; }
    .form-column { display: flex; flex-direction: column; gap: 20px; }
    .form-group { position: relative; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary); font-size: 14px; letter-spacing: 0.025em; position: relative; }
    .form-group label.required::after { content: " *"; color: var(--error-color); font-weight: 700; }
    .form-group input[type="text"], .form-group input[type="date"], .form-group input[type="number"], .form-group input[type="file"], .form-group select { width: 100%; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 8px; font-size: 14px; font-family: inherit; background: var(--card-background); color: var(--text-primary); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; }
    .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1); transform: translateY(-1px); }
    .form-group input:hover, .form-group select:hover { border-color: var(--primary-light); }
    .radio-group { display: flex; gap: 20px; margin-top: 8px; }
    .radio-group label { display: flex; align-items: center; gap: 8px; font-weight: 500; cursor: pointer; padding: 8px 12px; border-radius: 6px; transition: background-color 0.2s ease; }
    .radio-group label:hover { background: var(--background-secondary); }
    .radio-group input[type="radio"] { width: 18px; height: 18px; accent-color: var(--primary-color); cursor: pointer; }
    .button-group { display: flex; gap: 16px; justify-content: flex-end; margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border-light); flex-wrap: wrap; }
    .btn { padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; align-items: center; gap: 8px; text-decoration: none; position: relative; overflow: hidden; min-width: 120px; justify-content: center; }
    .btn-draft { background: var(--gradient-secondary); color: white; border: 2px solid transparent; }
    .btn-submit { background: var(--gradient-primary); color: white; border: 2px solid transparent; }
    .btn:not(.btn-draft):not(.btn-submit) { background: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); }
    .btn:not(.btn-draft):not(.btn-submit):hover { background: var(--background-secondary); border-color: var(--primary-color); color: var(--primary-color); }
    .form-section { margin-bottom: 32px; }
    .form-section-title { font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 20px; padding-bottom: 8px; border-bottom: 2px solid var(--border-light); display: flex; align-items: center; gap: 8px; }
    .form-section-title i { color: var(--primary-color); }
  </style>
</head>
<body>
  <div class="container">
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2><i class="fas fa-industry"></i> Menu</h2>
      </div>
      <div class="sidebar-body">
        <div class="nav-container">
          <ul class="nav-links">
            <li><a href="/dashboard"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
            <!-- <li><a href="/dashboard"><i class="fas fa-tachometer-alt"></i><span>Overview</span></a></li> -->
            <!-- <li><a href="/reports"><i class="fas fa-chart-bar"></i><span>Reports</span></a></li> -->
            <li ><a href="/search"><i class="fas fa-search"></i><span>Search</span></a></li>
            <li ><a href="/order"><i class="fas fa-clipboard-list"></i><span>Order Log</span></a></li>
            <li ><a href="/mixing"><i class="fas fa-blender"></i><span>Mixing</span></a></li>
            <li><a href="/production"><i class="fas fa-cogs"></i><span>Production</span></a></li>
            <li><a href="/extrusion"><i class="fas fa-industry"></i><span>Extrusion</span></a></li>
            <li><a href="/coating"><i class="fas fa-brush"></i><span>Coating</span></a></li>
            <li><a href="/jointing"><i class="fas fa-link"></i><span>Jointing</span></a></li>
            <li class="active"><a href="/moulding"><i class="fas fa-cube"></i><span>Moulding</span></a></li>
            <li><a href="/sheeting"><i class="fas fa-layer-group"></i><span>Sheeting</span></a></li>
            <li><a href="/qc"><i class="fas fa-user-shield"></i><span>QC Supervisor</span></a></li>
            <li><a href="/planning"><i class="fas fa-calendar-alt"></i><span>Planning</span></a></li>
            <li><a href="/inspection"><i class="fas fa-clipboard-check"></i><span>Inspection</span></a></li>
            <li><a href="/finalinspection"><i class="fas fa-check-double"></i><span>Final Inspection</span></a></li>
            <li><a href="/dispatch-note"><i class="fas fa-file-signature"></i><span>Dispatch Approval</span></a></li>
            <li><a href="/packing"><i class="fas fa-box"></i><span>Packing</span></a></li>
            <li><a href="/dispatch"><i class="fas fa-truck"></i><span>Dispatch</span></a></li>
          </ul>
        </div>
        <div class="user-info">
          <img src="armol-removebg-preview.png" alt="User Avatar">
        </div>
      </div>
    </nav>
    <main class="main-content">
      <div class="page-header">
        <div class="page-title"><i class="fas fa-cube"></i> Moulding</div>
        <div class="page-subtitle">Production & Post-Curing Entry</div>
        <h1 style="color:green; text-align:center;" th:text="${message}"></h1>
      </div>
      <div class="form-container">
        <form action="/fetch-by-route-moulding">
          <div class="form-row">
            <div class="form-column">
              <div class="form-group">
                <label for="routeCardNo" class="required">Route Card No.</label>
                <input type="text" id="routeCardNo" name="routeCardNo" th:value="${order?.routeCardNo}" placeholder="Enter Route Card No" required>
              </div>
              <div class="button-group">
                <button type="submit" class="btn">Fetch</button>
              </div>
            </div>
          </div>
        </form>
        <form action="/moulding" method="post">
          <div class="form-section">
            <h3 class="form-section-title"><i class="fas fa-flask"></i> Mixing Details</h3>
            <div class="form-row">
              <div class="form-column">
                <div class="form-group">
                  <label for="batchNo">Batch No.</label>
                  <input type="text" id="batchNo" name="batchNo" th:value="${production?.batchNo}" />
                </div>
                <div class="form-group">
                  <label for="batchWeight">Batch Weight</label>
                  <input type="text" id="batchWeight" name="batchWeight" th:value="${production?.batchWeight}" />
                </div>
                <div class="form-group">
                  <label for="routeCardNo">Route Card No</label>
                  <input type="text" id="routeCardNo" name="routeCardNo" th:value="${production?.routeCardNo}" />
                </div>
                <div class="form-group">
                  <label for="balanceWeight" class="required">Balance Weight</label>
                  <input type="text" id="balanceWeight" name="balanceWeight" th:value="${production?.balanceWeight}" />
                </div>
              </div>
            </div>
          </div>
          <div class="form-section">
            <h3 class="form-section-title"><i class="fas fa-sliders-h"></i> Setup Parameters</h3>
            <div class="form-row">
              <div class="form-column">
                <div class="form-group">
                  <label for="productionPerHour">Production Per Hour</label>
                  <input type="text" id="productionPerHour" name="productionPerHour" th:value="${production?.productionPerHour}" />
                </div>
                <div class="form-group">
                  <label for="weightPerPiece">Weight per Piece</label>
                  <input type="text" id="weightPerPiece" name="weightPerPiece" th:value="${production?.weightPerMeter}"/>
                </div>
                <div class="form-group">
                  <label for="toolDieNo">Tool / Die No.</label>
                  <input type="text" id="toolDieNo" name="toolDieNo" th:value="${production?.toolDieNo}" />
                </div>
                <div class="form-group">
                  <label for="noOfCavity">No. of Cavity</label>
                  <input type="text" id="noOfCavity" name="noOfCavity" th:value="${production?.noOfCavity}" />
                </div>
                <div class="form-group">
                  <label for="setupTime">Setup Time</label>
                  <input type="text" id="setupTime" name="setupTime" th:value="${production?.time}" />
                </div>
                <div class="form-group">
                  <label for="clampPressure">Clamp Pressure</label>
                  <input type="text" id="clampPressure" name="clampPressure" th:value="${production?.clampPressure}" />
                </div>
                <div class="form-group">
                  <label for="cycleTime">Cycle Time</label>
                  <input type="text" id="cycleTime" name="cycleTime" th:value="${production?.cycleTime}" />
                </div>
                <div class="form-group">
                  <label for="curingTemp">Curing Temp.</label>
                  <input type="text" id="curingTemp" name="curingTemp" th:value="${production?.curingTemp}" />
                </div>
                <div class="form-group">
                  <label for="drawingImage">Drawing / Image</label>
                  <div th:if="${order.imageUrl != null}">
                    <a th:href="${order.imageUrl}" target="_blank">
                      <button type="button" class="btn">VIEW IMAGE</button>
                    </a>
                  </div>
                  <div th:if="${order.imageUrl == null}">
                    <p class="text-danger">No image available for this Route Card</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-section">
            <h3 class="form-section-title"><i class="fas fa-cube"></i> Moulding</h3>
            <div class="form-row">
              <div class="form-column">
                <div class="form-group">
                  <label for="date">Date</label>
                  <input type="date" id="date" name="date" />
                </div>
                <div class="form-group">
                  <label for="startTime" class="required">Start Time</label>
                  <input type="time" id="startTime" name="startTime" />
                </div>
                <div class="form-group">
                  <label for="endTime" class="required">End Time</label>
                  <input type="time" id="endTime" name="endTime" />
                </div>
                <div class="form-group">
                  <label for="plannedQty">Planned Qty.</label>
                  <input type="text" id="plannedQty" name="plannedQty" />
                </div>
                <div class="form-group">
                  <label for="processedQty" class="required">Processed Qty.</label>
                  <input type="text" id="processedQty" name="processedQty" />
                </div>
                <div class="form-group">
                  <label for="okQty" class="required">OK Qty.</label>
                  <input type="text" id="okQty" name="okQty" />
                </div>
                <div class="form-group">
                  <label for="notOkQty" class="required">Not OK Qty.</label>
                  <input type="text" id="notOkQty" name="notOkQty" />
                </div>
                <div class="form-group">
                  <label for="operatorName" class="required">Operator Name</label>
                  <input type="text" id="operatorName" name="operatorName" />
                </div>
                <div class="form-group">
                  <label for="remark">Remark (if any)</label>
                  <input type="text" id="remark" name="remark" />
                </div>
              </div>
            </div>
          </div>
          <div class="form-section">
            <h3 class="form-section-title"><i class="fas fa-fire"></i> Post-Curing</h3>
            <div class="form-row">
              <div class="form-column">
                <div class="form-group">
                  <label for="receivedQty">Received Qty</label>
                  <input type="text" id="receivedQty" name="receivedQty" th:value="${extrusion?.receivedQty}" />
                </div>
                <div class="form-group">
                  <label for="postProcessedQty">Processed Qty.</label>
                  <input type="text" id="postProcessedQty" name="postProcessedQty" th:value="${extrusion?.postProcessedQty}" />
                </div>
                <div class="form-group">
                  <label for="temperature" class="required">Temperature</label>
                  <input type="text" id="temperature" name="temperature" th:value="${extrusion?.temperature}" />
                </div>
                <div class="form-group">
                  <label for="postStartTime" class="required">Start Time</label>
                  <input type="text" id="postStartTime" name="postStartTime" th:value="${extrusion?.postStartTime}" />
                </div>
                <div class="form-group">
                  <label for="postEndTime" class="required">End Time</label>
                  <input type="text" id="postEndTime" name="postEndTime" th:value="${extrusion?.postEndTime}" />
                </div>
                <div class="form-group">
                  <label for="duration" class="required">Duration</label>
                  <input type="text" id="duration" name="duration" th:value="${extrusion?.duration}" />
                </div>
                <div class="form-group">
                  <label for="postRemarks">Remarks (if any)</label>
                  <input type="text" id="postRemarks" name="postRemarks" th:value="${extrusion?.postRemarks}" />
                </div>
              </div>
            </div>
          </div>
          <div class="button-group">
            <button type="submit" formaction="/moulding-draft" formmethod="post" class="btn btn-draft">Save as Draft</button>
            <button type="submit" class="btn btn-submit">Submit</button>
            <a href="/export-moulding-report" class="btn">Download Report (Excel)</a>
            <a href="/production" class="btn">HOME</a>
          </div>
        </form>
      </div>
    </main>
  </div>
</body>
</html>
